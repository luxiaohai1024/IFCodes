<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>IFcodeClock</title>
    </head>
    <body>
            <select id="year-select">
                    <option value="2000">2000</option>
                    <option value="2001">2001</option>
                    <option value="2002">2002</option>
                    <option value="2003">2003</option>
                    <option value="2004">2004</option>
                    <option value="2005">2005</option>
                    <option value="2006">2006</option>
                    <option value="2006">2006</option>
                    <option value="2007">2007</option>
                    <option value="2008">2008</option>
                    <option value="2009">2009</option>
                    <option value="2010">2010</option>
                    <option value="2011">2011</option>
                    <option value="2012">2012</option>
                    <option value="2013">2013</option>
                    <option value="2014">2014</option>
                    <option value="2015">2015</option>
                    <option value="2016">2016</option>
                    <option value="2017">2017</option>
                    <option value="2018">2018</option>
                    <option value="2019">2019</option>
                    <option value="2020">2020</option>
                    <option value="2021">2021</option>
                    <option value="2022">2022</option>
                    <option value="2023">2023</option>
                    <option value="2024">2024</option>
                    <option value="2025">2025</option>
                    <option value="2026">2026</option>
                    <option value="2027">2027</option>
                    <option value="2028">2028</option>
                    <option value="2029">2029</option>
                    <option value="2030">2030</option>
                    <option value="2031">2031</option>
                    <option value="2032">2032</option>
                </select>
                
                <select id="month-select">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                </select>
                
                <select id="day-select">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                    <option value="24">24</option>
                    <option value="25">25</option>
                    <option value="26">26</option>
                    <option value="27">27</option>
                    <option value="28">28</option>
                    <option value="29">29</option>
                    <option value="30" class="specialDay30">30</option>
                    <option value="31" class="specialDay31">31</option>
                </select>
                
                <select id="hour-select">
                    <option value="0">00</option>
                    <option value="1">01</option>        
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                </select>
                
                <select id="minite-select">
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                    <option value="24">24</option>
                    <option value="25">25</option>
                    <option value="26">26</option>
                    <option value="27">27</option>
                    <option value="28">28</option>
                    <option value="29">29</option>
                    <option value="30">30</option>
                    <option value="31">31</option>
                    <option value="32">32</option>
                    <option value="33">33</option>
                    <option value="34">34</option>
                    <option value="35">35</option>
                    <option value="36">36</option>
                    <option value="37">37</option>
                    <option value="38">38</option>
                    <option value="39">39</option>
                    <option value="41">41</option>
                    <option value="42">42</option>
                    <option value="43">43</option>
                    <option value="44">44</option>
                    <option value="45">45</option>
                    <option value="46">46</option>
                    <option value="47">47</option>
                    <option value="48">48</option>
                    <option value="49">49</option>
                    <option value="51">51</option>
                    <option value="52">52</option>
                    <option value="53">53</option>
                    <option value="54">54</option>
                    <option value="55">55</option>
                    <option value="56">56</option>
                    <option value="57">57</option>
                    <option value="58">58</option>
                    <option value="59">59</option>
                </select>
                
                <select id="second-select">
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                    <option value="24">24</option>
                    <option value="25">25</option>
                    <option value="26">26</option>
                    <option value="27">27</option>
                    <option value="28">28</option>
                    <option value="29">29</option>
                    <option value="30">30</option>
                    <option value="31">31</option>
                    <option value="32">32</option>
                    <option value="33">33</option>
                    <option value="34">34</option>
                    <option value="35">35</option>
                    <option value="36">36</option>
                    <option value="37">37</option>
                    <option value="38">38</option>
                    <option value="39">39</option>
                    <option value="41">41</option>
                    <option value="42">42</option>
                    <option value="43">43</option>
                    <option value="44">44</option>
                    <option value="45">45</option>
                    <option value="46">46</option>
                    <option value="47">47</option>
                    <option value="48">48</option>
                    <option value="49">49</option>
                    <option value="51">51</option>
                    <option value="52">52</option>
                    <option value="53">53</option>
                    <option value="54">54</option>
                    <option value="55">55</option>
                    <option value="56">56</option>
                    <option value="57">57</option>
                    <option value="58">58</option>
                    <option value="59">59</option>
                </select>
                
                <p id="result-wrapper">现在距离 2001年1月1日星期X HH:MM:SS 还有 X 天 X 小时 X 分 X 秒</p>
        <script>
            var p = document.getElementById("result-wrapper");
            var year = document.getElementById("year-select");
            var month = document.getElementById("month-select");
            var day = document.getElementById("day-select");
            var hour = document.getElementById("hour-select");
            var minite = document.getElementById("minite-select");
            var second = document.getElementById("second-select");
            var the30 = document.getElementsByClassName("specialDay30")[0];
            var the31 = document.getElementsByClassName("specialDay31")[0];

            var setYear = 2000,
                setMonth = 1,
                setDay = 1,
                setHour = 0,
                setMinite = 0,
                setSecond = 0,
                nowYear,
                nowMonth,
                nowDay,
                nowHour,
                nowMinite,
                nowSecond;
            year.onchange = function(){
                var index = year.selectedIndex ;
                setYear = year.options[index].value;
            }
            month.onchange = function(){
                var index = month.selectedIndex ;
                setMonth = month.options[index].value;
                if(setMonth == 2){
                    the30.style.display = 'none';
                    the31.style.display = 'none';
                    if(setDay == 31 || setDay == 30){
                        setDay = 29;
                        day.value = 29;
                    }
                }else if(setMonth == 1 || setMonth == 3 || setMonth == 5 || 
                setMonth == 7 || setMonth == 8 || setMonth == 10 || 
                setMonth == 12){
                    the30.style.display = 'block';
                    the31.style.display = 'block';
                }else {
                    the30.style.display = 'block';
                    the31.style.display = 'none';
                    if(setDay == 31){
                        setDay = 30;
                        day.value = 30;
                    }
                }
            }
            day.onchange = function(){
                var index = day.selectedIndex ;
                setDay = day.options[index].value;
            }
            hour.onchange = function(){
                var index = hour.selectedIndex ;
                setHour = hour.options[index].value;
            }
            minite.onchange = function(){
                var index = minite.selectedIndex ;
                setMinite = minite.options[index].value;
            }
            second.onchange = function(){
                var index = second.selectedIndex ;
                setSecond = second.options[index].value;
            }


            var flag = setInterval(print,1000);


            function print(){
                var date = new Date();
                nowYear = date.getFullYear();
                nowMonth = date.getMonth() + 1;
                nowDay = date.getDate();
                nowHour = date.getHours();
                nowMinite = date.getMinutes();
                nowSecond = date.getSeconds();
                p.innerHTML = "现在距离" + nowYear + " 年 " + toBeTwo(nowMonth) + " 月 " 
                + toBeTwo(nowDay) + " 日 " + toDay(date.getDay()) + toBeTwo(nowHour) + ":" 
                + toBeTwo(nowMinite) + ":" + toBeTwo(nowSecond);
                if(setYear > nowYear ? true : setYear < nowYear 
                    ? false : setMonth > nowMonth ? true : setMonth < nowMonth 
                    ? false : setDay > nowDay ? true : setDay < nowDay
                    ? false : setHour > nowHour ? true : setHour < nowHour
                    ? false : setMinite > nowMinite ? true : setMinite < nowMinite
                    ? false : setSecond > nowSecond ){
                        var timeDay = howManeyDayYear(nowYear,setYear) + howManeyDayMonth(nowMonth,setMonth) + (setDay - nowDay);
                        var timeInSecond = timeDay*86400 + (setHour - nowHour)*3600 + (setMinite - nowMinite)*60 + (setSecond - nowSecond);
                        var theday = Math.floor(timeInSecond/86400);
                        var thehour = Math.floor((timeInSecond - theday*86400)/3600);
                        var theminite = Math.floor((timeInSecond - theday*86400 -thehour*3600)/60);
                        var thesecond = timeInSecond - theday*86400 - thehour*3600 - theminite*60;
                        p.innerHTML += "还有" + toBeTwo(theday) + "天" + toBeTwo(thehour) + "时" + toBeTwo(theminite) + "分" + toBeTwo(thesecond) + "秒";
                }else {
                    var timeDay = howManeyDayYear(setYear,nowYear) + howManeyDayMonth(setMonth,nowMonth) + (nowDay - setDay);
                    var timeInSecond = timeDay*86400 + (nowHour - setHour)*3600 + (nowMinite - setMinite)*60 + (nowSecond - setSecond);
                    var theday = Math.floor(timeInSecond/86400);
                    var thehour = Math.floor((timeInSecond - theday*86400)/3600);
                    var theminite = Math.floor((timeInSecond - theday*86400 -thehour*3600)/60);
                    var thesecond = timeInSecond - theday*86400 - thehour*3600 - theminite*60;
                    p.innerHTML += "已经过去" + toBeTwo(theday) + "天" + toBeTwo(thehour) + "时" + toBeTwo(theminite) + "分" + toBeTwo(thesecond) + "秒";
                }
            }

            function howManeyDayMonth(firstMonty,secondMonth){
                var dayNumber = 0;
                var flag = 1;
                if(firstMonty == secondMonth){
                    return dayNumber;
                }else if(firstMonty > secondMonth){
                    var temp = firstMonty;
                    firstMonty = secondMonth;
                    secondMonth = temp;
                    flag = -1;
                }
                for(var i = firstMonty ; i < secondMonth ; i++){
                    if(i == 2){
                        dayNumber += 29;
                    }else if(i == 1 || i == 3 || i == 5 || 
                        i == 7 || i == 8 || i == 10 || 
                        i == 12){
                        dayNumber += 31;
                    }else{
                        dayNumber += 30;
                    }
                }
                return dayNumber*flag;
            }
            function howManeyDayYear(smallYear,bigYear){
                var dayNumber = 0;
                for(var i = smallYear; i < bigYear; i++){
                    if(isRenYear(i)){
                        dayNumber += 366;
                    }else {
                        dayNumber += 365;
                    }
                }
                return dayNumber;
            }
            function isRenYear(year){ 
                return(0 == year%4 && (year%100 !=0 || year%400 == 0));
            }
            function toBeTwo(num){
                if(String(num).length == 1){
                    return "0" + num;
                }else {
                    return num;
                }
            }
            function toDay(num){
                switch(num){
                    case 0 : return "星期日";break;
                    case 1 : return "星期一";break;
                    case 2 : return "星期二";break;
                    case 3 : return "星期三";break;
                    case 4 : return "星期四";break;
                    case 5 : return "星期五";break;
                    case 6 : return "星期六";break;
                    default : break;
                }
            }
            function toDay2(num){
                switch(num){
                    case 0 : return "Sunday";break;
                    case 1 : return "Monday";break;
                    case 2 : return "Tuesday";break;
                    case 3 : return "Wednesday";break;
                    case 4 : return "Thursday";break;
                    case 5 : return "Friday";break;
                    case 6 : return "Saturday";break;
                    default : break;
                }
            }
        </script>
    </body>
</html>